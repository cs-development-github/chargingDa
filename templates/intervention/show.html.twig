{% extends 'base.html.twig' %}

{% block title %}D√©tail Intervention #{{ intervention.id }}
{% endblock %}

{% block body %}
	<style>
		.section-card {
			background: white;
			border-radius: 16px;
			padding: 25px;
			margin-bottom: 30px;
			box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
		}

		.section-card h4 {
			border-left: 4px solid #ff4081;
			padding-left: 10px;
			margin-bottom: 20px;
			font-weight: bold;
		}

		.list-group-item {
			border: none;
			border-bottom: 1px solid #eee;
		}

		.btn-primary {
			background: linear-gradient(to right, #ff4081, #ff8c00);
			border: none;
			border-radius: 8px;
		}

		.btn-secondary {
			border-radius: 8px;
		}

		.badge.bg-secondary {
			background-color: #6c757d;
			font-size: 0.75rem;
			padding: 4px 8px;
			border-radius: 10px;
		}

		.card-intervention {
			border-radius: 12px;
			border: none;
			box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
			transition: all 0.2s ease;
		}

		.card-intervention:hover {
			transform: translateY(-4px);
			box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
		}

		.card-title {
			font-weight: 600;
			color: #ff4081;
		}

		.img-fluid {
			max-height: 60px;
			object-fit: contain;
		}

		.card-footer .btn {
			background: linear-gradient(to right, #ff4081, #ff8c00);
			border: none;
			border-radius: 8px;
		}

		.text-muted {
			font-size: 0.9rem;
		}
	</style>

	<div class="container" style="margin-top: 150px;">
		<h2 class="mb-5 text-center">Intervention
			<strong>#{{ intervention.id }}</strong>
		</h2>

		<div class="row">
			<div class="col-md-6">
				<div class="section-card">
					<h4>üßë‚Äçüíº Client</h4>
					<ul class="list-group">
						<li class="list-group-item">
							<strong>Nom :</strong>
							{{ intervention.client.name }}
							{{ intervention.client.lastname }}</li>
						<li class="list-group-item">
							<strong>Soci√©t√© :</strong>
							{{ intervention.client.societyName }}</li>
						<li class="list-group-item">
							<strong>Email :</strong>
							{{ intervention.client.email }}</li>
						<li class="list-group-item">
							<strong>T√©l√©phone :</strong>
							{{ intervention.client.phone }}</li>
						<li class="list-group-item">
							<strong>SIRET :</strong>
							{{ intervention.client.siret }}</li>
						<li class="list-group-item">
							<strong>N¬∞ TVA :</strong>
							{{ intervention.client.numberTva }}</li>
						<li class="list-group-item">
							<strong>Code NAF :</strong>
							{{ intervention.client.codeNaf }}</li>
						<li class="list-group-item">
							<strong>Forme juridique :</strong>
							{{ intervention.client.legalForm }}</li>
					</ul>
				</div>
			</div>

			<div class="col-md-6">
				<div class="section-card">
					<h4>üîß Installateur</h4>
					<ul class="list-group">
						<li class="list-group-item">
							<strong>Nom :</strong>
							{{ intervention.installator.name }}
							{{ intervention.installator.lastname }}</li>
						<li class="list-group-item">
							<strong>Email :</strong>
							{{ intervention.installator.email }}</li>
						<li class="list-group-item">
							<strong>T√©l√©phone :</strong>
							{{ intervention.installator.phone }}</li>
						<li class="list-group-item">
							<strong>Soci√©t√© :</strong>
							{{ intervention.installator.societyName }}</li>
						<li class="list-group-item">
							<strong>SIRET :</strong>
							{{ intervention.installator.siret }}</li>
						<li class="list-group-item">
							<strong>Statut :</strong>
							{{ intervention.installator.isVerified ? '‚úÖ V√©rifi√©' : '‚ùå Non v√©rifi√©' }}</li>
						<li class="list-group-item">
							<strong>Cr√©√© le :</strong>
							{{ intervention.installator.createdAt|date('d/m/Y H:i') }}</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-6">
				<div class="section-card">
					<h4>‚ö°Ô∏è Borne concern√©e</h4>
					<ul class="list-group">
						<li class="list-group-item">
							<strong>Nom :</strong>
							{{ intervention.borneName }}</li>
						<li class="list-group-item">
							<strong>Mod√®le :</strong>
							{{ intervention.chargingStation.model }}</li>
						<li class="list-group-item">
							<strong>Fabricant :</strong>
							{{ intervention.chargingStation.manufacturer.name ?? 'Inconnu' }}</li>
						<li class="list-group-item">
							<strong>Connecteurs :</strong>
							{{ intervention.chargingStation.connectors }}</li>
						<li class="list-group-item">
							<strong>Slug :</strong>
							{{ intervention.chargingStation.slug }}</li>
						<li class="list-group-item">
							<strong>Cr√©√©e le :</strong>
							{{ intervention.chargingStation.createdAt|date('d/m/Y H:i') }}</li>
					</ul>
				</div>
			</div>
		</div>

		{% if groupInterventions|length > 1 %}
			<div class="section-card">
				<h4>üì¶ Bornes li√©es √† cette intervention group√©e</h4>
				<div class="row mt-4">
					{% for inter in groupInterventions %}
						<div class="col-md-6 col-lg-4 mb-4">
							<div class="card card-intervention h-100">
								<div class="card-body">
									<div class="d-flex justify-content-between align-items-center mb-3">
										<h5 class="card-title mb-0">{{ inter.borneName }}</h5>
									</div>

									<p class="card-text">
										<strong>R√©f√©rence :</strong>
										{{ inter.reference }}</p>
									<p class="card-text">
										<strong>Mod√®le :</strong>
										{{ inter.chargingStation.model ?? '‚Äî' }}</p>
									<p class="card-text">
										<strong>Fabricant :</strong>
										{{ inter.chargingStation.manufacturer.name ?? '‚Äî' }}</p>
									<p class="card-text">
										<strong>Connecteurs :</strong>
										{{ inter.chargingStation.connectors ?? '‚Äî' }}</p>
									<p class="card-text">
										<strong>SIM :</strong>
										{{ inter.sim ?? '‚Äî' }}</p>

									{% if inter.chargingStation.manufacturer.image %}
										<img src="{{ asset('uploads/' ~ inter.chargingStation.manufacturer.image) }}" alt="Logo Fabricant" class="img-fluid me-2 mb-2">
									{% endif %}

									{% if inter.chargingStation.image %}
										<img src="{{ asset('uploads/' ~ inter.chargingStation.image) }}" alt="Image Borne" class="img-fluid mb-2">
									{% endif %}
								</div>
								<div class="card-footer bg-transparent text-end">
									<a href="{{ path('intervention_client_show', { id: inter.id }) }}" class="btn btn-sm btn-primary">Voir</a>
								</div>
							</div>
						</div>

					{% endfor %}
				</div>
			</div>
		{% endif %}

		<div class="text-end">
			<a href="{{ path('app_intervention') }}" class="btn btn-secondary mt-4">‚Üê Retour √† la liste</a>
		</div>

	</div>
{% endblock %}
